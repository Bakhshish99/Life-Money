<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Life & Money – Budgeting Simulator</title>

  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="index.css">
</head>
<body>

<header>
  <h1>Life & Money</h1>
  <p>Design your budget · Learn by seeing</p>
</header>

<main>

<section>
  <h3>1. Income</h3>
  <div class="card">
    <label>Active Income</label>
    <input type="number" class="income" value="40000">
    <label>Passive Income</label>
    <input type="number" class="income" value="2000">
  </div>
</section>

<section>
  <h3>2. Expenses</h3>
  <div class="grid">
    <div class="card">
      <h4>Needs</h4>
      <label>Rent / EMI</label><input type="number" class="expense need" value="12000">
      <label>Utilities</label><input type="number" class="expense need" value="3000">
      <label>Groceries</label><input type="number" class="expense need" value="6000">
      <label>Transport</label><input type="number" class="expense need" value="4000">
      <label>Healthcare</label><input type="number" class="expense need" value="2000">
    </div>

    <div class="card">
      <h4>Wants</h4>
      <label>Dining</label><input type="number" class="expense want" value="2000">
      <label>Shopping</label><input type="number" class="expense want" value="2500">
      <label>Entertainment</label><input type="number" class="expense want" value="2000">
      <label>Subscriptions</label><input type="number" class="expense want" value="800">
      <label>Travel</label><input type="number" class="expense want" value="1500">
    </div>
  </div>
</section>

<section>
  <h3>3. Savings</h3>
  <div class="card">
    <label>Emergency Fund</label><input type="number" class="saving" value="3000">
    <label>Fixed Deposit</label><input type="number" class="saving" value="4000">
    <label>Gold</label><input type="number" class="saving" value="2000">
    <label>Mutual Funds</label><input type="number" class="saving" value="4000">
    <label>Stocks</label><input type="number" class="saving" value="2000">
  </div>
</section>

<section>
  <button onclick="runAnalysis()">Run Budget Analysis</button>
  <div class="loader" id="loader"></div>
  <p class="error" id="error"></p>
</section>

</main>

<script>
const sum = sel => [...document.querySelectorAll(sel)]
  .reduce((a,b)=>a+Number(b.value||0),0)

const validate = () => {
  let ok = true
  document.querySelectorAll('input').forEach(i=>{
    if(i.value===''||Number(i.value)<0){
      i.classList.add('error-input')
      ok=false
    } else i.classList.remove('error-input')
  })
  return ok
}

function runAnalysis(){
  const loader = document.getElementById('loader')
  const error = document.getElementById('error')
  error.innerText=''
  loader.style.display='block'

  setTimeout(()=>{
    if(!validate()){
      loader.style.display='none'
      error.innerText='All fields are mandatory (0 allowed).'
      return
    }

    const income=sum('.income')
    const needs=sum('.need')
    const expenses=sum('.expense')
    const wants=expenses-needs
    const savings=sum('.saving')

    const data={
      income, needs, wants, savings,
      balance: income-expenses-savings,
      needsPct: Math.round(needs/income*100),
      wantsPct: Math.round(wants/income*100),
      savingsPct: Math.round(savings/income*100)
    }

    sessionStorage.setItem('budgetData',JSON.stringify(data))
    window.location.href='analysis.html'
  },700)
}
</script>

</body>
</html>
